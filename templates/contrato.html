{% extends "base.html" %}
{% block content %}
  <div class="h1">Emitir contrato</div>
  <p class="p">Os dados principais já vêm da proposta. Complete o restante e gere o PDF.</p>

  <div class="card">
    <form method="post" class="form">
      <div class="full">
        <h3 style="margin:0 0 10px 0;">Dados puxados da proposta</h3>
      </div>

      <div class="full">
        <label class="label">Denominação (Cliente)</label>
        <input class="input" name="denominacao" required value="{{ pre.denom }}">
      </div>

      <div>
        <label class="label">CPF/CNPJ</label>
        <input class="input" name="cpf_cnpj" required value="{{ pre.cpf }}">
      </div>

      <div>
        <label class="label">Equipamento (Modelo)</label>
        <input class="input" name="equipamento" required value="{{ pre.modelo }}">
      </div>

      <div>
        <label class="label">Franquia</label>
        <input class="input" name="franquia" required value="{{ pre.franquia }}">
      </div>

      <div>
        <label class="label">Valor mensal</label>
        <input class="input" name="valor_mensal" required value="{{ pre.valor }}">
      </div>

      <div class="full"><div class="hr"></div></div>

      <div class="full">
        <h3 style="margin:0 0 10px 0;">Complete</h3>
      </div>

      <div class="full">
        <label class="label">Endereço</label>
        <input class="input" name="endereco" required>
      </div>

      <div>
        <label class="label">Telefone</label>
        <input class="input" name="telefone" required>
      </div>

      <div>
        <label class="label">E-mail</label>
        <input class="input" name="email" required>
      </div>

      <div class="full">
        <label class="label">Acessórios</label>
        <div style="display:flex; gap:16px; flex-wrap:wrap; padding:10px 0;">
          <label class="small"><input type="checkbox" name="acc" value="Cabo energia" checked> Cabo energia</label>
          <label class="small"><input type="checkbox" name="acc" value="Cabo USB" checked> Cabo USB</label>
        </div>

        <label class="label">Outros acessórios (opcional)</label>
        <input class="input" name="acc_outros">
      </div>

      <div>
        <label class="label">Data início (digite só números: 200226 → 20/02/26)</label>
        <input id="data_inicio" class="input" name="data_inicio" required placeholder="dd/mm/aa" maxlength="8" inputmode="numeric">
      </div>

      <div>
        <label class="label">Data término (digite só números)</label>
        <input id="data_termino" class="input" name="data_termino" required placeholder="dd/mm/aa" maxlength="8" inputmode="numeric">
      </div>

      <div class="full" style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn primary" type="submit">Gerar contrato (PDF)</button>
        <a class="btn" href="{{ back_url }}">Voltar</a>
      </div>
    </form>

    {% if erro %}
      <div class="hr"></div>
      <div style="color: var(--danger); white-space:pre-wrap;">{{ erro }}</div>
    {% endif %}
  </div>
{% endblock %}